var __extends=this.__extends||function(u,k){function n(){this.constructor=u}for(var p in k)k.hasOwnProperty(p)&&(u[p]=k[p]);n.prototype=k.prototype;u.prototype=new n};
define(["require","exports"],function(u,k){var n=function(){function a(){this.listeners=[]}a.prototype.hasEventListener=function(b,a){for(var d=!1,f=0;f<this.listeners.length;f++)if(this.listeners[f].type===b&&this.listeners[f].listener===a){d=!0;break}return d};a.prototype.addEventListener=function(b,a){this.hasEventListener(b,a)||this.listeners.push({type:b,listener:a})};a.prototype.removeEventListener=function(b,a){for(var d=0;d<this.listeners.length;d++)this.listeners[d].type===b&&this.listeners[d].listener===
a&&this.listeners.splice(d,1)};a.prototype.dispatchEvent=function(b){for(var a=0;a<this.listeners.length;a++)this.listeners[a].type===b.getType()&&this.listeners[a].listener.call(this,b)};return a}();k.EventDispatcher=n;var p=function(a){function b(){a.call(this)}__extends(b,a);b.prototype.onConnect=function(b){b.dispatchEvent(new m(m.LEAPMOTION_CONNECTED,this))};b.prototype.onDisconnect=function(b){b.dispatchEvent(new m(m.LEAPMOTION_DISCONNECTED,this))};b.prototype.onExit=function(b){b.dispatchEvent(new m(m.LEAPMOTION_EXIT,
this))};b.prototype.onFrame=function(b,a){b.dispatchEvent(new m(m.LEAPMOTION_FRAME,this,a))};b.prototype.onInit=function(b){b.dispatchEvent(new m(m.LEAPMOTION_INIT,this))};return b}(n);k.DefaultListener=p;var m=function(){function a(b,a,d){"undefined"===typeof d&&(d=null);this._type=b;this._target=a;this.frame=d}a.prototype.getTarget=function(){return this._target};a.prototype.getType=function(){return this._type};a.LEAPMOTION_INIT="leapMotionInit";a.LEAPMOTION_CONNECTED="leapMotionConnected";a.LEAPMOTION_DISCONNECTED=
"leapMotionDisconnected";a.LEAPMOTION_EXIT="leapMotionExit";a.LEAPMOTION_FRAME="leapMotionFrame";return a}();k.LeapEvent=m;var G=function(){function a(){}a.toDegrees=function(b){return 180*b/Math.PI};a.isNearZero=function(b){return Math.abs(b)<=a.EPSILON};a.vectorIsNearZero=function(b){return this.isNearZero(b.x)&&this.isNearZero(b.y)&&this.isNearZero(b.z)};a.extractRotation=function(b){return new q(b.xBasis,b.yBasis,b.zBasis)};a.rotationInverse=function(b){return new q(new g(b.xBasis.x,b.yBasis.x,
b.zBasis.x),new g(b.xBasis.y,b.yBasis.y,b.zBasis.y),new g(b.xBasis.z,b.yBasis.z,b.zBasis.z))};a.rigidInverse=function(b){var a=this.rotationInverse(b);a.origin=a.transformDirection(b.origin.opposite());return a};a.componentWiseMin=function(b,a){return new g(Math.min(b.x,a.x),Math.min(b.y,a.y),Math.min(b.z,a.z))};a.componentWiseMax=function(b,a){return new g(Math.max(b.x,a.x),Math.max(b.y,a.y),Math.max(b.z,a.z))};a.componentWiseScale=function(b,a){return new g(b.x*a.x,b.y*a.y,b.z*a.z)};a.componentWiseReciprocal=
function(b){return new g(1/b.x,1/b.y,1/b.z)};a.minComponent=function(b){return Math.min(b.x,Math.min(b.y,b.z))};a.maxComponent=function(b){return Math.max(b.x,Math.max(b.y,b.z))};a.heading=function(b){return Math.atan2(b.z,b.x)};a.elevation=function(b){return Math.atan2(b.y,Math.sqrt(b.z*b.z+b.x*b.x))};a.normalizeSpherical=function(b){var e=b.y;for(b=b.z;b<=-Math.PI;)b+=a.TWO_PI;for(;b>Math.PI;)b-=a.TWO_PI;Math.abs(b)>a.HALF_PI&&(e+=Math.PI,b=0<b?Math.PI-b:-(Math.PI+b));for(;e<=-Math.PI;)e+=a.TWO_PI;
for(;e>Math.PI;)e-=a.TWO_PI;return new g(1,e,b)};a.cartesianToSpherical=function(b){return new g(b.magnitude(),this.heading(b),this.elevation(b))};a.sphericalToCartesian=function(b){var a=b.x,d=Math.cos(b.y),f=Math.sin(b.y),c=Math.cos(b.z);b=Math.sin(b.z);return new g(d*c*a,b*a,f*c*a)};a.clamp=function(b,a,d){return b<a?a:b>d?d:b};a.lerp=function(b,a,d){return b+(a-b)*d};a.lerpVector=function(b,a,d){return b.plus(a.minus(b).multiply(d))};a.PI=3.1415926536;a.DEG_TO_RAD=0.0174532925;a.RAD_TO_DEG=57.295779513;
a.TWO_PI=Math.PI+Math.PI;a.HALF_PI=0.5*Math.PI;a.EPSILON=1E-5;return a}();k.LeapUtil=G;n=function(a){function b(e){"undefined"===typeof e&&(e=null);var d=this;a.call(this);this.frameHistory=[];this._isGesturesEnabled=this._isConnected=!1;this.listener=new p;this.connection=e?new WebSocket("ws://"+e+":6437"):new WebSocket("ws://localhost:6437");this.listener.onInit(this);this.connection.onopen=function(b){d._isConnected=!0;d.listener.onConnect(d)};this.connection.onclose=function(b){d._isConnected=
!1;d.listener.onDisconnect(d)};this.connection.onmessage=function(a){var c,e,h,k,m;c=JSON.parse(a.data);if("undefined"!==typeof c.timestamp){e=new z;e.controller=d;if("undefined"!==typeof c.hands)for(m=c.hands.length,a=0;a<m;a++)h=new A,h.frame=e,h.direction=new g(c.hands[a].direction[0],c.hands[a].direction[1],c.hands[a].direction[2]),h.id=c.hands[a].id,h.palmNormal=new g(c.hands[a].palmNormal[0],c.hands[a].palmNormal[1],c.hands[a].palmNormal[2]),h.palmPosition=new g(c.hands[a].palmPosition[0],c.hands[a].palmPosition[1],
c.hands[a].palmPosition[2]),h.palmVelocity=new g(c.hands[a].palmPosition[0],c.hands[a].palmPosition[1],c.hands[a].palmPosition[2]),h.rotation=new q(new g(c.hands[a].r[0][0],c.hands[a].r[0][1],c.hands[a].r[0][2]),new g(c.hands[a].r[1][0],c.hands[a].r[1][1],c.hands[a].r[1][2]),new g(c.hands[a].r[2][0],c.hands[a].r[2][1],c.hands[a].r[2][2])),h.scaleFactorNumber=c.hands[a].s,h.sphereCenter=new g(c.hands[a].sphereCenter[0],c.hands[a].sphereCenter[1],c.hands[a].sphereCenter[2]),h.sphereRadius=c.hands[a].sphereRadius,
h.translationVector=new g(c.hands[a].t[0],c.hands[a].t[1],c.hands[a].t[2]),e.hands.push(h);e.id=c.id;"undefined"!==typeof c.interactionBox&&(e.interactionBox=new C,e.interactionBox.center=new g(c.interactionBox.center[0],c.interactionBox.center[1],c.interactionBox.center[2]),e.interactionBox.width=c.interactionBox.size[0],e.interactionBox.height=c.interactionBox.size[1],e.interactionBox.depth=c.interactionBox.size[2]);if("undefined"!==typeof c.pointables)for(m=c.pointables.length,a=0;a<m;a++){h=(k=
c.pointables[a].tool)?new v:new w;h.frame=e;h.id=c.pointables[a].id;h.hand=b.getHandByID(e,c.pointables[a].handId);h.length=c.pointables[a].length;h.direction=new g(c.pointables[a].direction[0],c.pointables[a].direction[1],c.pointables[a].direction[2]);h.tipPosition=new g(c.pointables[a].tipPosition[0],c.pointables[a].tipPosition[1],c.pointables[a].tipPosition[2]);h.stabilizedTipPosition=new g(c.pointables[a].stabilizedTipPosition[0],c.pointables[a].stabilizedTipPosition[1],c.pointables[a].stabilizedTipPosition[2]);
h.tipVelocity=new g(c.pointables[a].tipVelocity[0],c.pointables[a].tipVelocity[1],c.pointables[a].tipVelocity[2]);h.touchDistance=c.pointables[a].touchDist;e.pointables.push(h);switch(c.pointables[a].touchZone){case "hovering":h.touchZone=x.ZONE_HOVERING;break;case "touching":h.touchZone=x.ZONE_TOUCHING;break;default:h.touchZone=x.ZONE_NONE}h.hand&&h.hand.pointables.push(h);k?(h.isTool=!0,h.isFinger=!1,h.width=c.pointables[a].width,e.tools.push(h),h.hand&&h.hand.tools.push(h)):(h.isTool=!1,h.isFinger=
!0,e.fingers.push(h),h.hand&&h.hand.fingers.push(h))}if("undefined"!==typeof c.gestures)for(m=c.gestures.length,a=0;a<m;a++){switch(c.gestures[a].type){case "circle":h=new B;k=r.TYPE_CIRCLE;var l=h;l.center=new g(c.gestures[a].center[0],c.gestures[a].center[1],c.gestures[a].center[2]);l.normal=new g(c.gestures[a].normal[0],c.gestures[a].normal[1],c.gestures[a].normal[2]);l.progress=c.gestures[a].progress;l.radius=c.gestures[a].radius;break;case "swipe":h=new D;k=r.TYPE_SWIPE;l=h;l.startPosition=new g(c.gestures[a].startPosition[0],
c.gestures[a].startPosition[1],c.gestures[a].startPosition[2]);l.position=new g(c.gestures[a].position[0],c.gestures[a].position[1],c.gestures[a].position[2]);l.direction=new g(c.gestures[a].direction[0],c.gestures[a].direction[1],c.gestures[a].direction[2]);l.speed=c.gestures[a].speed;break;case "screenTap":h=new E;k=r.TYPE_SCREEN_TAP;l=h;l.position=new g(c.gestures[a].position[0],c.gestures[a].position[1],c.gestures[a].position[2]);l.direction=new g(c.gestures[a].direction[0],c.gestures[a].direction[1],
c.gestures[a].direction[2]);l.progress=c.gestures[a].progress;break;case "keyTap":h=new F;k=r.TYPE_KEY_TAP;l=h;l.position=new g(c.gestures[a].position[0],c.gestures[a].position[1],c.gestures[a].position[2]);l.direction=new g(c.gestures[a].direction[0],c.gestures[a].direction[1],c.gestures[a].direction[2]);l.progress=c.gestures[a].progress;break;default:throw Error("unkown gesture type");}var n=l=0;if("undefined"!==typeof c.gestures[a].handIds)for(n=c.gestures[a].handIds.length,l=0;l<n;++l){var p=
b.getHandByID(e,c.gestures[a].handIds[l]);h.hands.push(p)}if("undefined"!==typeof c.gestures[a].pointableIds){n=c.gestures[a].pointableIds.length;for(l=0;l<n;++l)(p=b.getPointableByID(e,c.gestures[a].pointableIds[l]))&&h.pointables.push(p);h instanceof B&&0<h.pointables.length&&(h.pointable=h.pointables[0])}h.frame=e;h.id=c.gestures[a].id;h.duration=c.gestures[a].duration;h.durationSeconds=h.duration/1E6;switch(c.gestures[a].state){case "start":h.state=y.STATE_START;break;case "update":h.state=y.STATE_UPDATE;
break;case "stop":h.state=y.STATE_STOP;break;default:h.state=y.STATE_INVALID}h.type=k;e._gestures.push(h)}c.r&&(e.rotation=new q(new g(c.r[0][0],c.r[0][1],c.r[0][2]),new g(c.r[1][0],c.r[1][1],c.r[1][2]),new g(c.r[2][0],c.r[2][1],c.r[2][2])));e.scaleFactorNumber=c.s;c.t&&(e.translationVector=new g(c.t[0],c.t[1],c.t[2]));e.timestamp=c.timestamp;59<d.frameHistory.length&&d.frameHistory.splice(59,1);d.frameHistory.unshift(d.latestFrame);d.latestFrame=e;d.listener.onFrame(d,d.latestFrame)}}}__extends(b,
a);b.getHandByID=function(b,a){for(var f=null,c=0,c=0;c<b.hands.length;c++)if(b.hands[c].id===a){f=b.hands[c];break}return f};b.getPointableByID=function(b,a){for(var f=null,c=0,c=0;c<b.pointables.length;c++)if(b.pointables[c].id===a){f=b.pointables[c];break}return f};b.prototype.frame=function(b){"undefined"===typeof b&&(b=0);return b>=this.frameHistory.length?z.invalid():this.frameHistory[b]};b.prototype.setListener=function(b){this.listener=b};b.prototype.enableGesture=function(b,a){"undefined"===
typeof a&&(a=!0);var f={};a?(this._isGesturesEnabled=!0,f.enableGestures=!0):(this._isGesturesEnabled=!1,f.enableGestures=!1);this.connection.send(JSON.stringify(f))};b.prototype.isGestureEnabled=function(b){return this._isGesturesEnabled};b.prototype.isConnected=function(){return this._isConnected};return b}(n);k.Controller=n;var C=function(){function a(){}a.prototype.denormalizePoint=function(b){var a=g.invalid();a.x=(b.x+this.center.x-0.5)*this.width;a.y=(b.y+this.center.y-0.5)*this.height;a.z=
(b.z+this.center.z-0.5)*this.depth;return a};a.prototype.normalizePoint=function(b,a){"undefined"===typeof a&&(a=!0);var d=g.invalid();d.x=(b.x-this.center.x)/this.width+0.5;d.y=(b.y-this.center.y)/this.height+0.5;d.z=(b.z-this.center.z)/this.depth+0.5;a&&(d.x=Math.min(Math.max(d.x,0),1),d.y=Math.min(Math.max(d.y,0),1),d.z=Math.min(Math.max(d.z,0),1));return d};a.prototype.isValid=function(){return this.center.isValid()&&0<this.width&&0<this.height&&0<this.depth};a.prototype.isEqualTo=function(b){return this.isValid()&&
b.isValid()&&this.center.isEqualTo(b.center)&&this.depth==b.depth&&this.height==b.height&&this.width==b.width?!0:!1};a.invalid=function(){return new a};a.prototype.toString=function(){return"[InteractionBox depth:"+this.depth+" height:"+this.height+" width:"+this.width+"]"};return a}();k.InteractionBox=C;(function(a){a[a.ZONE_NONE=0]="ZONE_NONE";a[a.ZONE_HOVERING=1]="ZONE_HOVERING";a[a.ZONE_TOUCHING=2]="ZONE_TOUCHING"})(k.Zone||(k.Zone={}));var x=k.Zone,s=function(){function a(){this.touchZone=x.ZONE_NONE;
this.width=this.length=this.touchDistance=0;this.direction=g.invalid();this.tipPosition=g.invalid();this.tipVelocity=g.invalid()}a.prototype.isValid=function(){var b=!1;this.direction&&this.direction.isValid()&&(this.tipPosition&&this.tipPosition.isValid()&&this.tipVelocity&&this.tipVelocity.isValid())&&(b=!0);return b};a.prototype.isEqualTo=function(b){return this.isValid()&&b.isValid()&&this.frame==b.frame&&this.hand==b.hand&&this.direction.isEqualTo(b.direction)&&this.length==b.length&&this.width==
b.width&&this.id==b.id&&this.tipPosition.isEqualTo(b.tipPosition)&&this.tipVelocity.isEqualTo(b.tipVelocity)&&this.isFinger==b.isFinger&&this.isTool==b.isTool?!0:!1};a.invalid=function(){return new a};a.prototype.toString=function(){return"[Pointable direction: "+this.direction+" tipPosition: "+this.tipPosition+" tipVelocity: "+this.tipVelocity+"]"};return a}();k.Pointable=s;(function(a){a[a.STATE_INVALID=0]="STATE_INVALID";a[a.STATE_START=1]="STATE_START";a[a.STATE_UPDATE=2]="STATE_UPDATE";a[a.STATE_STOP=
3]="STATE_STOP"})(k.State||(k.State={}));var y=k.State;(function(a){a[a.TYPE_INVALID=4]="TYPE_INVALID";a[a.TYPE_SWIPE=5]="TYPE_SWIPE";a[a.TYPE_CIRCLE=6]="TYPE_CIRCLE";a[a.TYPE_SCREEN_TAP=7]="TYPE_SCREEN_TAP";a[a.TYPE_KEY_TAP=8]="TYPE_KEY_TAP"})(k.Type||(k.Type={}));var r=k.Type,t=function(){function a(){this.hands=[];this.pointables=[]}a.prototype.isEqualTo=function(b){return this.id==b.id};a.prototype.isValid=function(){return this.durationSeconds?!0:!1};a.invalid=function(){return new a};a.prototype.toString=
function(){return"[Gesture id:"+this.id+" duration:"+this.duration+" type:"+this.type+"]"};return a}();k.Gesture=t;var w=function(a){function b(){a.call(this);this.isFinger=!0;this.isTool=!1}__extends(b,a);b.invalid=function(){return new b};return b}(s);k.Finger=w;var v=function(a){function b(){a.call(this);this.isFinger=!1;this.isTool=!0}__extends(b,a);b.invalid=function(){return new b};return b}(s);k.Tool=v;var A=function(){function a(){this.fingers=[];this.pointables=[];this.tools=[]}a.prototype.isValid=
function(){return this.direction&&this.direction.isValid()&&this.palmNormal&&this.palmNormal.isValid()&&this.palmPosition&&this.palmPosition.isValid()&&this.palmVelocity&&this.palmVelocity.isValid()&&this.sphereCenter&&this.sphereCenter.isValid()?!0:!1};a.prototype.isEqualTo=function(b){return this.id===b.id&&this.frame===b.frame&&this.isValid()&&b.isValid()?!0:!1};a.prototype.finger=function(b){for(var a=w.invalid(),d=this.fingers.length,f=0;f<d;f++)if(this.fingers[f].id===b){a=this.fingers[f];break}return a};
a.prototype.tool=function(b){for(var a=v.invalid(),d=this.fingers.length,f=0;f<d;f++)if(this.tools[f].id===b){a=this.tools[f];break}return a};a.prototype.pointable=function(b){for(var a=s.invalid(),d=this.pointables.length,f=0;f<d;f++)if(this.pointables[f].id===b){a=this.pointables[f];break}return a};a.prototype.rotationAxis=function(b){return b.hand(this.id)?(new g(this.rotation.zBasis.y-b.hand(this.id).rotation.yBasis.z,this.rotation.xBasis.z-b.hand(this.id).rotation.zBasis.x,this.rotation.yBasis.x-
b.hand(this.id).rotation.xBasis.y)).normalized():new g(0,0,0)};a.prototype.rotationAngle=function(b,a){"undefined"===typeof a&&(a=null);if(!this.isValid()||!b.hand(this.id).isValid())return 0;var d=0,d=this.rotationMatrix(b),d=Math.acos(0.5*(d.xBasis.x+d.yBasis.y+d.zBasis.z-1)),d=isNaN(d)?0:d;if(a)var f=this.rotationAxis(b.hand(this.id).frame),d=d*f.dot(a.normalized());return d};a.prototype.rotationMatrix=function(a){return a.hand(this.id).isValid()?a.hand(this.id).rotation.multiply(new q(new g(this.rotation.xBasis.x,
this.rotation.yBasis.x,this.rotation.zBasis.x),new g(this.rotation.xBasis.y,this.rotation.yBasis.y,this.rotation.zBasis.y),new g(this.rotation.xBasis.z,this.rotation.yBasis.z,this.rotation.zBasis.z))):q.identity()};a.prototype.scaleFactor=function(a){return a&&a.hand(this.id)&&a.hand(this.id).scaleFactorNumber?Math.exp(this.scaleFactorNumber-a.hand(this.id).scaleFactorNumber):1};a.prototype.translation=function(a){return a.hand(this.id)&&a.hand(this.id).translationVector?new g(this.translationVector.x-
a.hand(this.id).translationVector.x,this.translationVector.y-a.hand(this.id).translationVector.y,this.translationVector.z-a.hand(this.id).translationVector.z):new g(0,0,0)};a.invalid=function(){return new a};return a}();k.Hand=A;var z=function(){function a(){this.fingers=[];this.hands=[];this.pointables=[];this._gestures=[];this.tools=[]}a.prototype.hand=function(a){for(var e=A.invalid(),d=this.hands.length,f=0;f<d;f++)if(this.hands[f].id===a){e=this.hands[f];break}return e};a.prototype.finger=function(a){for(var e=
w.invalid(),d=this.fingers.length,f=0;f<d;f++)if(this.fingers[f].id===a){e=this.fingers[f];break}return e};a.prototype.tool=function(a){for(var e=v.invalid(),d=this.fingers.length,f=0;f<d;f++)if(this.tools[f].id===a){e=this.tools[f];break}return e};a.prototype.pointable=function(a){for(var e=s.invalid(),d=this.pointables.length,f=0;f<d;f++)if(this.pointables[f].id===a){e=this.pointables[f];break}return e};a.prototype.gesture=function(a){for(var e=t.invalid(),d=this._gestures.length,f=0;f<d;f++)if(this._gestures[f].id===
a){e=this._gestures[f];break}return e};a.prototype.gestures=function(a){"undefined"===typeof a&&(a=null);if(a){for(var e=[],d=0;d<this.controller.frameHistory.length;d++){for(var f=0;f<this.controller.frameHistory[d]._gestures.length;++f)e.push(this.controller.frameHistory[d]._gestures[f]);if(a===this.controller.frameHistory[d])break}return e}return this._gestures};a.prototype.rotationAxis=function(a){return a&&a.rotation?(new g(this.rotation.zBasis.y-a.rotation.yBasis.z,this.rotation.xBasis.z-a.rotation.zBasis.x,
this.rotation.yBasis.x-a.rotation.xBasis.y)).normalized():new g(0,0,0)};a.prototype.rotationAngle=function(a,e){"undefined"===typeof e&&(e=null);if(!this.isValid()||!a.isValid())return 0;var d=0,d=this.rotationMatrix(a),d=Math.acos(0.5*(d.xBasis.x+d.yBasis.y+d.zBasis.z-1)),d=isNaN(d)?0:d;if(e)var f=this.rotationAxis(a),d=d*f.dot(e.normalized());return d};a.prototype.rotationMatrix=function(a){return a&&a.rotation?a.rotation.multiply(new q(new g(this.rotation.xBasis.x,this.rotation.yBasis.x,this.rotation.zBasis.x),
new g(this.rotation.xBasis.y,this.rotation.yBasis.y,this.rotation.zBasis.y),new g(this.rotation.xBasis.z,this.rotation.yBasis.z,this.rotation.zBasis.z))):q.identity()};a.prototype.scaleFactor=function(a){return a&&a.scaleFactorNumber?Math.exp(this.scaleFactorNumber-a.scaleFactorNumber):1};a.prototype.translation=function(a){return a.translationVector?new g(this.translationVector.x-a.translationVector.x,this.translationVector.y-a.translationVector.y,this.translationVector.z-a.translationVector.z):
new g(0,0,0)};a.prototype.isEqualTo=function(a){var e=!0;if(this.id!=a.id||!this.isValid()||a.isValid())e=!1;return e};a.prototype.isValid=function(){return this.id?!0:!1};a.invalid=function(){return new a};return a}();k.Frame=z;var q=function(){function a(a,e,d,f){"undefined"===typeof f&&(f=null);this.origin=new g(0,0,0);this.xBasis=new g(0,0,0);this.yBasis=new g(0,0,0);this.zBasis=new g(0,0,0);this.xBasis=a;this.yBasis=e;this.zBasis=d;f&&(this.origin=f)}a.prototype.setRotation=function(a,e){var d=
a.normalized(),f=Math.sin(e),c=Math.cos(e),k=1-c;this.xBasis=new g(d.x*d.x*k+c,d.x*d.y*k-d.z*f,d.x*d.z*k+d.y*f);this.yBasis=new g(d.y*d.x*k+d.z*f,d.y*d.y*k+c,d.y*d.z*k-d.x*f);this.zBasis=new g(d.z*d.x*k-d.y*f,d.z*d.y*k+d.x*f,d.z*d.z*k+c)};a.prototype.transformPoint=function(a){return new g(this.xBasis.multiply(a.x).x,this.yBasis.multiply(a.y).y,this.zBasis.multiply(a.z).z+this.origin.z)};a.prototype.transformDirection=function(a){var e=this.xBasis.multiply(a.x),d=this.yBasis.multiply(a.y);a=this.zBasis.multiply(a.z);
return e.plus(d).plus(a)};a.prototype.rigidInverse=function(){var b=new a(new g(this.xBasis.x,this.yBasis.x,this.zBasis.x),new g(this.xBasis.y,this.yBasis.y,this.zBasis.y),new g(this.xBasis.z,this.yBasis.z,this.zBasis.z));this.origin&&(b.origin=b.transformDirection(this.origin.opposite()));return b};a.prototype.multiply=function(b){var e=this.transformDirection(b.xBasis),d=this.transformDirection(b.yBasis),f=this.transformDirection(b.zBasis),c=this.origin;this.origin&&b.origin&&(c=this.transformPoint(b.origin));
return new a(e,d,f,c)};a.prototype.multiplyAssign=function(a){this.xBasis=this.transformDirection(a.xBasis);this.yBasis=this.transformDirection(a.yBasis);this.zBasis=this.transformDirection(a.zBasis);this.origin=this.transformPoint(a.origin);return this};a.prototype.isEqualTo=function(a){return this.xBasis.isEqualTo(a.xBasis)&&this.yBasis.isEqualTo(a.yBasis)&&this.zBasis.isEqualTo(a.zBasis)&&this.origin.isEqualTo(a.origin)?!0:!1};a.identity=function(){var b=new g(1,0,0),e=new g(0,1,0),d=new g(0,0,
1);return new a(b,e,d)};a.prototype.toString=function(){return"[Matrix xBasis:"+this.xBasis.toString()+" yBasis:"+this.yBasis.toString()+" zBasis:"+this.zBasis.toString()+" origin:"+this.origin.toString()+"]"};return a}();k.Matrix=q;var B=function(a){function b(){a.call(this);this.pointable=s.invalid()}__extends(b,a);b.classType=r.TYPE_CIRCLE;return b}(t);k.CircleGesture=B;var F=function(a){function b(){a.call(this);this.progress=1}__extends(b,a);b.classType=r.TYPE_KEY_TAP;return b}(t);k.KeyTapGesture=
F;var E=function(a){function b(){a.call(this);this.progress=1}__extends(b,a);b.classType=r.TYPE_SCREEN_TAP;return b}(t);k.ScreenTapGesture=E;var D=function(a){function b(){a.call(this)}__extends(b,a);b.classType=r.TYPE_SWIPE;return b}(t);k.SwipeGesture=D;var g=function(){function a(a,e,d){this.x=a;this.y=e;this.z=d}a.prototype.opposite=function(){return new a(-this.x,-this.y,-this.z)};a.prototype.plus=function(b){return new a(this.x+b.x,this.y+b.y,this.z+b.z)};a.prototype.plusAssign=function(a){this.x+=
a.x;this.y+=a.y;this.z+=a.z;return this};a.prototype.minus=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)};a.prototype.minusAssign=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};a.prototype.multiply=function(b){return new a(this.x*b,this.y*b,this.z*b)};a.prototype.multiplyAssign=function(a){this.x*=a;this.y*=a;this.z*=a;return this};a.prototype.divide=function(b){return new a(this.x/b,this.y/b,this.z/b)};a.prototype.divideAssign=function(a){this.x/=a;this.y/=a;this.z/=a;
return this};a.prototype.isEqualTo=function(a){return this.x!=a.x||this.y!=a.y||this.z!=a.z};a.prototype.angleTo=function(a){var e=this.magnitudeSquared()*a.magnitudeSquared();return 0>=e?0:Math.acos(this.dot(a)/Math.sqrt(e))};a.prototype.cross=function(b){return new a(this.y*b.z-this.z*b.y,this.z*b.x-this.x*b.z,this.x*b.y-this.y*b.x)};a.prototype.distanceTo=function(a){return Math.sqrt((this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y)+(this.z-a.z)*(this.z-a.z))};a.prototype.dot=function(a){return this.x*
a.x+this.y*a.y+this.z*a.z};a.prototype.isValid=function(){return this.x<=Number.MAX_VALUE&&this.x>=-Number.MAX_VALUE&&this.y<=Number.MAX_VALUE&&this.y>=-Number.MAX_VALUE&&this.z<=Number.MAX_VALUE&&this.z>=-Number.MAX_VALUE};a.invalid=function(){return new a(NaN,NaN,NaN)};a.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};a.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z};a.prototype.normalized=function(){var b=this.magnitudeSquared();
if(0>=b)return new a(0,0,0);b=1/Math.sqrt(b);return new a(this.x*b,this.y*b,this.z*b)};Object.defineProperty(a.prototype,"pitch",{get:function(){return Math.atan2(this.y,-this.z)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"yaw",{get:function(){return Math.atan2(this.x,-this.z)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"roll",{get:function(){return Math.atan2(this.x,-this.y)},enumerable:!0,configurable:!0});a.zero=function(){return new a(0,0,0)};a.xAxis=
function(){return new a(1,0,0)};a.yAxis=function(){return new a(0,1,0)};a.zAxis=function(){return new a(0,0,1)};a.left=function(){return new a(-1,0,0)};a.right=function(){return this.xAxis()};a.down=function(){return new a(0,-1,0)};a.up=function(){return this.yAxis()};a.forward=function(){return new a(0,0,-1)};a.backward=function(){return this.zAxis()};a.prototype.toString=function(){return"[Vector3 x:"+this.x+" y:"+this.y+" z:"+this.z+"]"};return a}();k.Vector3=g});
